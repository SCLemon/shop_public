(function(){"use strict";var t={1034:function(t,e,i){var a=i(2856),s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app",attrs:{id:"app"}},[e("Top"),e("router-view",{staticClass:"view"}),e("Footer")],1)},n=[],o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"top"},[e("div",{staticClass:"logo",on:{click:function(e){return t.goTo("1","/index")}}},[e("img",{attrs:{src:"img/logo_expand.png",alt:""}})]),e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.q,expression:"q"}],staticClass:"search_input",attrs:{type:"text",placeholder:"想買什麼？這裡找！"},domProps:{value:t.q},on:{input:[function(e){e.target.composing||(t.q=e.target.value)},function(e){return t.handleSearch()}]}}),t._m(0)]),e("div",{staticClass:"top_item_box"},[e("div",{class:"top_item "+(t.$route.path.includes("/index")?"top_item_current_page":""),on:{click:function(e){return t.goTo("1","/index")}}},[t._v("購物首頁")]),t.isLogin?[e("div",{class:"top_item "+(t.$route.path.includes("/trade")?"top_item_current_page":""),on:{click:function(e){return t.goTo("1","/trade")}}},[t._v("交易列表")]),e("div",{class:"top_item "+(t.$route.path.includes("/member")?"top_item_current_page":""),on:{click:function(e){return t.logout()}}},[t._v("登出")])]:e("div",{class:"top_item "+(t.$route.path.includes("/verify")?"top_item_current_page":""),on:{click:function(e){return t.goTo("1","/verify")}}},[t._v("登入 | 註冊")])],2)]),e("div",{staticClass:"top_mobile_box"},[e("div",{staticClass:"logo_mobile",on:{click:function(e){return t.goTo("1","/index")}}},[e("img",{attrs:{src:"img/logo.png",alt:""}})]),e("div",{staticClass:"search_mobile"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.q,expression:"q"}],staticClass:"search_mobile_input",attrs:{type:"text",placeholder:"想買什麼？這裡找！"},domProps:{value:t.q},on:{input:[function(e){e.target.composing||(t.q=e.target.value)},function(e){return t.handleSearch()}]}}),t._m(1)]),e("div",{ref:"top_mobile",staticClass:"top_mobile",on:{click:function(e){return t.toggleMobileList()}}},[e("i",{staticClass:"fa-solid fa-bars"})])]),e("div",{ref:"top_mobile_list",staticClass:"top_mobile_list"},[e("div",{staticClass:"top_mobile_list_item",on:{click:function(e){return t.goTo("2","/index")}}},[t._v("購物首頁")]),t.isLogin?[e("div",{staticClass:"top_mobile_list_item",on:{click:function(e){return t.goTo("2","/trade")}}},[t._v("交易列表")]),e("div",{staticClass:"top_mobile_list_item",on:{click:function(e){return t.logout()}}},[t._v("登出")])]:e("div",{staticClass:"top_mobile_list_item",on:{click:function(e){return t.goTo("2","/verify")}}},[t._v("登入 | 註冊")])],2)])},l=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"search_btn"},[e("i",{staticClass:"fa-solid fa-magnifying-glass"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"search_mobile_btn"},[e("i",{staticClass:"fa-solid fa-magnifying-glass"})])}],r=(i(4114),i(5462)),c={name:"Top",data(){return{q:"",isLogin:!1,mobile_list_open:!1}},mounted(){this.$bus.$on("toggleTop",this.toggleTop),this.$bus.$on("clearQuery",this.clearQuery),this.checkIsLogin()},watch:{q:{handler(){this.$bus.$emit("handleQuery",this.q),this.$route.fullPath.includes("index")||""==this.q||this.$router.push("/index").catch((t=>{}))}}},methods:{clearQuery(){this.q=""},logout(){r.A.remove("x-user-token"),r.A.remove("x-user-info"),this.toggleTop("logout"),this.toggleMobileList(),this.$router.push("/verify").catch((t=>{}))},goTo(t,e){1==t?this.$router.push(e).catch((t=>{})):2==t&&this.mobile_list_open&&(this.$router.push(e).catch((t=>{})),this.toggleMobileList())},toggleMobileList(){this.mobile_list_open=!this.mobile_list_open,this.$refs["top_mobile"].classList.toggle("top_mobile_open"),this.$refs["top_mobile_list"].classList.toggle("top_mobile_list_open")},toggleTop(t){"login"==t?this.isLogin=!0:"logout"==t&&(this.isLogin=!1)},checkIsLogin(){const t=r.A.get("x-user-token");t&&""!=t.trim()&&(this.isLogin=!0)}}},d=c,u=i(1656),p=(0,u.A)(d,o,l,!1,null,"5120a7be",null),h=p.exports,m=function(){var t=this;t._self._c;return t._m(0)},_=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer"},[e("div",[e("div",[t._v("信用至上，誠信相待")]),e("div",[t._v("Copyright © 2025 Joanna. All rights reserved.")])])])}],f={name:"Footer"},v=f,g=(0,u.A)(v,m,_,!1,null,"d72623bc",null),b=g.exports,y={name:"App",components:{Top:h,Footer:b},mounted(){this.$bus.$on("handleAlert",this.handleAlert)},methods:{handleAlert(t,e,i){this.$notify({title:t,message:e,type:i,duration:750})}}},C=y,$=(0,u.A)(C,s,n,!1,null,null,null),k=$.exports,x=i(1594),A=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{title:"添加至購物車",visible:t.dialogVisible,"before-close":t.handleDialogClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-input-number",{staticClass:"quantity",attrs:{min:1,label:"描述文字"},model:{value:t.addToCartProduct.quantity,callback:function(e){t.$set(t.addToCartProduct,"quantity",e)},expression:"addToCartProduct.quantity"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addToCart()}}},[t._v("確定")])],1)],1),t.showList.length?[e("div",{staticClass:"List"},[t.userInfo&&2==t.userInfo.level?e("Upload"):t._e(),t._l(t.showList,(function(i,a){return e("div",{key:a,staticClass:"List_item"},[t.userInfo&&2==t.userInfo.level?e("Dropdown",{attrs:{idx:i.uuid,item:i}}):t._e(),e("div",{staticClass:"List_item_img"},[e("el-carousel",{attrs:{height:"188px",autoplay:!1,trigger:"click",loop:!1}},t._l(i.src,(function(t){return e("el-carousel-item",{key:t},[e("div",{staticClass:"img_box"},[e("img",{attrs:{src:`/api/img/download/${t}`,alt:""}})])])})),1)],1),e("div",{on:{click:function(e){return t.openDetail(i)}}},[e("div",{staticClass:"List_item_title"},[t._v(" "+t._s(i.name)+" ")]),e("div",{staticClass:"List_item_remaining"},[t._v("剩餘 "+t._s(i.remaining)+" 件")]),e("div",{staticClass:"List_item_price"},[t._v(" $"+t._s(i.price)+" ")])]),e("div",{staticClass:"List_item_icon"},[e("i",{staticClass:"fa-solid fa-cart-shopping",attrs:{title:"加入購物車"},on:{click:function(e){return t.openDialog(i.uuid)}}})])],1)}))],2)]:e("el-empty",{staticClass:"empty",attrs:{description:"查無此商品"}}),e("el-dialog",{attrs:{title:"商品介紹",visible:t.detailTableVisible},on:{"update:visible":function(e){t.detailTableVisible=e}}},[e("el-carousel",{attrs:{height:"200px",autoplay:!1,trigger:"click",loop:!1}},t._l(t.detailProduct.src,(function(t){return e("el-carousel-item",{key:t},[e("div",{staticClass:"detail_img_box"},[e("img",{attrs:{src:`/api/img/download/${t}`,alt:""}})])])})),1),e("div",{staticClass:"detail_1"},[e("div",{staticClass:"detail_1_title"},[t._v(t._s(t.detailProduct.name))]),e("div",{staticClass:"detail_1_region"},[e("div",{staticClass:"detail_1_price"},[t._v("$"+t._s(t.detailProduct.price))]),e("div",{staticClass:"detail_1_remaining"},[t._v("剩餘 "+t._s(t.detailProduct.remaining)+" 件")])])]),e("div",{staticClass:"detail_2"},[t._v(t._s(t.detailProduct.detail))]),e("div",{staticClass:"detail_3"},[e("el-button",{staticClass:"detail_3_btn",attrs:{type:"primary"},on:{click:function(e){return t.openDialog(t.detailProduct.uuid)}}},[t._v("加入購物車")])],1)],1)],2)},w=[],T=i(417),I=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{title:"新增商品",visible:t.addTableVisible},on:{"update:visible":function(e){t.addTableVisible=e}}},[e("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"#",multiple:"","auto-upload":!1,accept:"image/*","on-change":t.handleChange,"file-list":t.upload.attachments}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("將文件拖到此處，或"),e("em",[t._v("點擊上傳")])]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("僅開放上傳 image 且 1:1 為佳。")])]),e("div",{staticClass:"info"},[e("div",{staticClass:"info_title"},[t._v("商品名稱")]),e("el-input",{attrs:{placeholder:"请輸入商品名稱"},model:{value:t.upload.name,callback:function(e){t.$set(t.upload,"name",e)},expression:"upload.name"}})],1),e("div",{staticClass:"info"},[e("div",{staticClass:"info_title"},[t._v("商品介紹")]),e("el-input",{attrs:{placeholder:"请簡單介紹商品"},model:{value:t.upload.detail,callback:function(e){t.$set(t.upload,"detail",e)},expression:"upload.detail"}})],1),e("div",{staticClass:"numInfo"},[e("div",{staticClass:"numInfo_item"},[t._v("價格："),e("el-input-number",{staticClass:"numInfo_input",attrs:{"controls-position":"right",min:0},model:{value:t.upload.price,callback:function(e){t.$set(t.upload,"price",e)},expression:"upload.price"}})],1),e("div",{staticClass:"numInfo_item"},[t._v("庫存："),e("el-input-number",{staticClass:"numInfo_input",attrs:{"controls-position":"right",min:0},model:{value:t.upload.remaining,callback:function(e){t.$set(t.upload,"remaining",e)},expression:"upload.remaining"}})],1)]),e("div",{staticClass:"upload_btn_box"},[e("el-button",{staticClass:"upload_btn",attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){return t.send()}}},[t._v(t._s(t.isLoading?"商品創建中...":"新增商品"))])],1)],1),e("div",{staticClass:"List_item List_add",on:{click:function(e){t.addTableVisible=!0}}},[t._m(0)])],1)},L=[function(){var t=this,e=t._self._c;return e("div",[e("i",{staticClass:"fa-solid fa-plus"})])}],q={name:"Upload",data(){return{addTableVisible:!1,isLoading:!1,upload:{name:"",detail:"",price:0,remaining:1,attachments:[]}}},methods:{async send(){this.isLoading=!0;let t=new FormData;t.append("name",this.upload.name),t.append("detail",this.upload.detail),t.append("price",this.upload.price),t.append("remaining",this.upload.remaining);for(let i of this.upload.attachments)t.append("attachments",i);try{const e=await T.A.post("/api/product/add",t,{headers:{"x-user-token":r.A.get("x-user-token"),"Content-Type":"multipart/form-data"}});"success"==e.data.type&&(this.addTableVisible=!1,this.upload={name:"",detail:"",price:0,remaining:1,attachments:[]},this.$bus.$emit("refreshProduct")),this.$bus.$emit("handleAlert","新增商品通知",e.data.msg,e.data.type)}catch(e){this.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員","error")}finally{this.isLoading=!1}},handleChange(t,e){this.upload.attachments=e.map((t=>t.raw))}}},D=q,P=(0,u.A)(D,I,L,!1,null,"656f2262",null),O=P.exports,V=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"dropdown"},[e("el-dropdown",[e("span",{staticClass:"el-dropdown-link"},[e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{nativeOn:{click:function(e){return t.edit(t.idx)}}},[t._v("編輯")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.remove(t.idx)}}},[t._v("刪除")])],1)],1)],1),e("el-dialog",{attrs:{title:"修改商品",visible:t.reviseTableVisible},on:{"update:visible":function(e){t.reviseTableVisible=e}}},[e("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"#",multiple:"","auto-upload":!1,accept:"image/*","on-change":t.handleChange,"file-list":t.upload.attachments}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("將文件拖到此處，或"),e("em",[t._v("點擊上傳")])]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("若需修改圖片，請記得重新上傳原先的圖片。")])]),e("div",{staticClass:"info"},[e("div",{staticClass:"info_title"},[t._v("商品名稱")]),e("el-input",{attrs:{placeholder:"请輸入商品名稱"},model:{value:t.upload.name,callback:function(e){t.$set(t.upload,"name",e)},expression:"upload.name"}})],1),e("div",{staticClass:"info"},[e("div",{staticClass:"info_title"},[t._v("商品介紹")]),e("el-input",{attrs:{placeholder:"请簡單介紹商品"},model:{value:t.upload.detail,callback:function(e){t.$set(t.upload,"detail",e)},expression:"upload.detail"}})],1),e("div",{staticClass:"numInfo"},[e("div",{staticClass:"numInfo_item"},[t._v("價格："),e("el-input-number",{staticClass:"numInfo_input",attrs:{"controls-position":"right",min:0},model:{value:t.upload.price,callback:function(e){t.$set(t.upload,"price",e)},expression:"upload.price"}})],1),e("div",{staticClass:"numInfo_item"},[t._v("庫存："),e("el-input-number",{staticClass:"numInfo_input",attrs:{"controls-position":"right",min:0},model:{value:t.upload.remaining,callback:function(e){t.$set(t.upload,"remaining",e)},expression:"upload.remaining"}})],1)]),e("div",{staticClass:"upload_btn_box"},[e("el-button",{staticClass:"upload_btn",attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){return t.revise()}}},[t._v(t._s(t.isLoading?"商品修改中...":"修改商品"))])],1)],1)],1)},S=[],F={name:"Dropdown",props:{idx:{type:String,default:""},item:{type:Object,default:{}}},data(){return{currentIdx:"",reviseTableVisible:!1,isLoading:!1,upload:{name:"",detail:"",price:0,remaining:1,attachments:[]}}},watch:{item:{handler(t){this.upload={name:t.name||"",detail:t.detail||"",price:t.price||0,remaining:t.remaining||1,attachments:[]}},immediate:!0,deep:!0}},mounted(){this.upload=this.item,this.upload.attachments=[]},methods:{async remove(t){try{const e=await T.A.delete(`/api/product/remove/${t}`,{headers:{"x-user-token":r.A.get("x-user-token")}});this.$bus.$emit("handleAlert","刪除商品通知",e.data.msg,e.data.type),(e.data.type="success")&&this.$bus.$emit("refreshProduct")}catch(e){this.$bus.$emit("handleAlert","系統錯誤通知","系統異常錯誤，請洽客服人員。","error")}},async edit(t){this.reviseTableVisible=!0,this.currentIdx=t},async revise(){this.isLoading=!0;let t=new FormData;t.append("name",this.upload.name),t.append("detail",this.upload.detail),t.append("price",this.upload.price),t.append("remaining",this.upload.remaining);for(let i of this.upload.attachments)t.append("attachments",i);try{const e=await T.A.put(`/api/product/revise/${this.currentIdx}`,t,{headers:{"x-user-token":r.A.get("x-user-token"),"Content-Type":"multipart/form-data"}});"success"==e.data.type&&(this.reviseTableVisible=!1,this.upload={name:"",detail:"",price:0,remaining:1,attachments:[]},this.$bus.$emit("refreshProduct"),this.currentIdx=""),this.$bus.$emit("handleAlert","修改商品通知",e.data.msg,e.data.type)}catch(e){this.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員","error")}finally{this.isLoading=!1}},handleChange(t,e){this.upload.attachments=e.map((t=>t.raw))}}},M=F,j=(0,u.A)(M,V,S,!1,null,"182de674",null),Q=j.exports,J={name:"Main",components:{Upload:O,Dropdown:Q},data(){return{q:"",dialogVisible:!1,detailTableVisible:!1,text:"",addToCartProduct:{product_uuid:"",quantity:1},userInfo:{},list:[],detailProduct:{}}},mounted(){this.$bus.$on("handleQuery",this.handleQuery),this.$bus.$on("refreshProduct",this.getData),this.getData();const t=r.A.get("x-user-info");if(t){const e=t.slice(t.indexOf("{")),i=JSON.parse(e);this.userInfo=i}},computed:{showList(){return this.list.filter((t=>t.name.includes(this.q)))}},methods:{handleQuery(t){this.q=t},openDetail(t){this.detailTableVisible=!0,this.detailProduct=t},openDialog(t){const e=r.A.get("x-user-token");if(!e||""==e.trim())return this.$bus.$emit("handleAlert","系統提示","請先登入後再加入購物車。","error"),void this.$router.push("/verify").catch((t=>{}));this.dialogVisible=!0,this.addToCartProduct.product_uuid=t},handleDialogClose(){this.dialogVisible=!1,this.addToCartProduct={product_uuid:"",quantity:1}},async getData(){try{const t=await T.A.get("/api/product/get");"success"==t.data.type?this.list=t.data.data.filter((t=>t.name.includes(this.q))):this.$bus.$emit("handleAlert","資料獲取通知",t.data.msg,t.data.type)}catch(t){this.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員。","error")}},async addToCart(){try{const t=await T.A.post("/api/cart/add",this.addToCartProduct,{headers:{"x-user-token":r.A.get("x-user-token")}});this.$bus.$emit("handleAlert","購物車通知",t.data.msg,t.data.type),"success"==t.data.type&&(this.addToCartProduct={uuid:"",quantity:1},this.dialogVisible=!1,t.data.redirect&&this.$router.push(t.data.redirect))}catch(t){this.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員。","error")}}},beforeDestroy(){this.$bus.$emit("clearQuery")}},N=J,B=(0,u.A)(N,A,w,!1,null,"2b6cc3ce",null),U=B.exports,E=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("el-dialog",{attrs:{title:"忘記密碼",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{model:t.form}},[e("el-form-item",{attrs:{label:"請輸入使用者帳號","label-width":t.formLabelWidth}},[e("el-input",{attrs:{autocomplete:"off",placeholder:"密碼將發送於註冊時的電子信箱"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.forgetPassword()}}},[t._v("確定")])],1)],1),e("div",{staticClass:"box"},[e("div",{staticClass:"login_title"},[e("span",{class:"type "+(1==t.type?"selected_type":""),on:{click:function(e){t.type=1}}},[t._v("登入")]),t._v("｜"),e("span",{class:"type "+(2==t.type?"selected_type":""),on:{click:function(e){t.type=2}}},[t._v("註冊")])]),2==t.type?e("div",{staticClass:"login_info"},[e("div",{staticClass:"subText"},[t._v("使用者信箱：")]),e("el-input",{attrs:{placeholder:"請輸入電子信箱",clearable:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1):t._e(),e("div",{staticClass:"login_info"},[e("div",{staticClass:"subText"},[t._v("使用者帳號：")]),e("el-input",{attrs:{placeholder:"請輸入帳號",clearable:""},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),e("div",{staticClass:"login_info"},[e("div",{staticClass:"subText"},[t._v("使用者密碼：")]),e("el-input",{attrs:{placeholder:"請輸入密碼","show-password":"",clearable:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),1==t.type?e("div",{staticClass:"forget",on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("忘記密碼？")]):t._e()],1),e("div",{staticClass:"login_info"},[e("el-button",{staticClass:"login_btn",attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){return t.useMethod()}}},[t._v(t._s(t.isLoading?"驗證中...":1==t.type?"登入":"註冊"))])],1),e("div",{staticClass:"version"},[t._v("Created By Joanna @v1.0.0")])])],1)},z=[],W={name:"Verify",data(){return{isLoading:!1,dialogFormVisible:!1,type:1,email:"",account:"",password:"",form:{account:""}}},methods:{useMethod(){1==this.type?this.login():2==this.type&&this.register()},async login(){try{const t=await T.A.post("/api/verify/login",{account:this.account,password:this.password});"success"==t.data.type?(this.$router.push("/index").catch((t=>{})),this.$bus.$emit("toggleTop","login")):this.$bus.$emit("handleAlert","登入通知",t.data.msg,t.data.type)}catch(t){this.$bus.$emit("handleAlert","系統異常通知","請洽客服人員","error")}},async register(){try{const t=await T.A.post("/api/verify/register",{email:this.email,account:this.account,password:this.password});this.$bus.$emit("handleAlert","註冊通知",t.data.msg,t.data.type),"success"==t.data.type&&(this.type=1)}catch(t){this.$bus.$emit("handleAlert","系統異常通知","請洽客服人員","error")}},async forgetPassword(){try{const t=await T.A.post("/api/verify/forgetPassword",{account:this.form.account});this.$bus.$emit("handleAlert","密碼重發通知",t.data.msg,t.data.type),"success"==t.data.type&&(this.dialogFormVisible=!1,this.form.account="")}catch(t){this.$bus.$emit("handleAlert","系統異常通知","請洽客服人員","error")}}}},G=W,H=(0,u.A)(G,E,z,!1,null,"631a1ad6",null),K=H.exports,R=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("div",{staticClass:"step"},[e("el-steps",{attrs:{active:t.step,simple:""}},[e("el-step",{staticClass:"step_item",attrs:{title:"購物車",icon:"el-icon-shopping-cart-1"},nativeOn:{click:function(e){return t.goToStep("/trade/cart")}}}),e("el-step",{staticClass:"step_item",attrs:{title:"交易中",icon:"el-icon-loading"},nativeOn:{click:function(e){return t.goToStep("/trade/transaction")}}}),e("el-step",{staticClass:"step_item",attrs:{title:"已完成",icon:"el-icon-check"},nativeOn:{click:function(e){return t.goToStep("/trade/finish")}}})],1)],1),e("router-view")],1)},X=[],Y={name:"Trade",data(){return{}},computed:{step(){const t=this.$route.path;return t.includes("cart")?1:t.includes("transaction")?2:t.includes("finish")?3:void 0}},methods:{goToStep(t){this.$router.push(t).catch((t=>{}))}}},Z=Y,tt=(0,u.A)(Z,R,X,!1,null,"38dbf4cf",null),et=tt.exports,it=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[t.list.length?t._l(t.list,(function(i,a){return e("div",{key:a,staticClass:"list"},[e("div",{staticClass:"list_img"},[e("el-carousel",{attrs:{height:"120px",autoplay:!1,trigger:"click",loop:!1}},t._l(i.src,(function(t){return e("el-carousel-item",{key:t},[e("div",{staticClass:"img_box"},[e("img",{attrs:{src:`/api/img/download/${t}`,alt:""}})])])})),1)],1),e("div",{staticClass:"list_content"},[e("div",{staticClass:"list_title"},[t._v(t._s(i.name))]),e("div",{staticClass:"list_detail"},[t._v(t._s(i.detail))]),e("div",{staticClass:"mobile_list_price"},[t._v(" $"+t._s(i.price)+" "),e("i",{staticClass:"el-icon-delete trash",on:{click:function(e){return t.removeItem(i.trade_id)}}})]),e("div",{staticClass:"list_bottom"},[e("div",{staticClass:"list_price"},[t._v(" $"+t._s(i.price*i.quantity)+" "),e("i",{staticClass:"el-icon-delete trash",on:{click:function(e){return t.removeItem(i.trade_id)}}})]),e("div",{staticClass:"list_bottom_right"},[e("el-input-number",{staticClass:"right_quantity",attrs:{min:1},on:{change:function(e){return t.handleChange(i.trade_id,i.quantity)}},model:{value:i.quantity,callback:function(e){t.$set(i,"quantity",e)},expression:"obj.quantity"}}),e("el-input-number",{staticClass:"mobile_right_quantity",attrs:{size:"small",min:1},on:{change:function(e){return t.handleChange(i.trade_id,i.quantity)}},model:{value:i.quantity,callback:function(e){t.$set(i,"quantity",e)},expression:"obj.quantity"}}),e("el-button",{staticClass:"list_bottom_btn",attrs:{type:"primary"},on:{click:function(e){return t.purchase(i.trade_id,i.product_uuid)}}},[t._v("立即下單")]),e("el-button",{staticClass:"mobile_list_bottom_btn",attrs:{type:"primary",icon:"el-icon-shopping-cart-1",circle:""},on:{click:function(e){return t.purchase(i.trade_id,i.product_uuid)}}})],1)])])])})):e("el-empty",{staticClass:"empty",attrs:{description:"暫無交易明細"}})],2)},at=[],st={name:"Cart",data(){return{list:[]}},mounted(){this.getData()},methods:{async getData(){try{const t=await T.A.get("/api/cart/items",{headers:{"x-user-token":r.A.get("x-user-token")}});"success"==t.data.type?this.list=t.data.data:this.$bus.$emit("handleAlert","購物車資訊通知",t.data.msg,t.data.type)}catch(t){his.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員。","error")}},async handleChange(t,e){try{const i=await T.A.put("/api/cart/update/quantity",{trade_id:t,quantity:e},{headers:{"x-user-token":r.A.get("x-user-token")}});"success"!=i.data.type&&this.$bus.$emit("handleAlert","訂單更新通知",i.data.msg,i.data.type)}catch(i){this.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員。","error")}},async removeItem(t){try{const e=await T.A.delete(`/api/cart/delete/${t}`,{headers:{"x-user-token":r.A.get("x-user-token")}});"success"==e.data.type?this.getData():this.$bus.$emit("handleAlert","購物車資訊通知",e.data.msg,e.data.type)}catch(e){this.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員。","error")}},async purchase(t,e){try{const i=await T.A.post("/api/transaction/add",{trade_id:t,product_uuid:e},{headers:{"x-user-token":r.A.get("x-user-token")}});this.$bus.$emit("handleAlert","商品下單通知",i.data.msg,i.data.type),"success"==i.data.type&&(this.getData(),this.$router.push("/trade/transaction").catch((t=>{})))}catch(i){this.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員。","error")}}}},nt=st,ot=(0,u.A)(nt,it,at,!1,null,"787e03d8",null),lt=ot.exports,rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[t.list.length?t._l(t.list,(function(i,a){return e("div",{key:a,staticClass:"list"},[e("div",{staticClass:"label"},[t._v(t._s(i.status))]),e("div",{staticClass:"list_img"},[e("el-carousel",{attrs:{height:"120px",autoplay:!1,trigger:"click",loop:!1}},t._l(i.product_image,(function(t){return e("el-carousel-item",{key:t},[e("div",{staticClass:"img_box"},[e("img",{attrs:{src:`/api/img/download/${t}`,alt:""}})])])})),1)],1),e("div",{staticClass:"list_content"},[e("div",{staticClass:"list_title"},[t._v(t._s(i.product_name))]),e("div",{staticClass:"list_detail"},[t._v(t._s(i.product_detail))]),e("div",{staticClass:"list_bottom"},[e("div",{staticClass:"list_price"},[t._v(" $"+t._s(i.total_amount)+" ")]),e("div",{staticClass:"list_bottom_right"},["未付款"==i.status&&t.userInfo.token==i.token?e("i",{staticClass:"el-icon-delete trash",on:{click:function(e){return t.removeItem(i.trade_id)}}}):t._e(),1==t.userInfo.level?["未付款"==i.status?e("el-button",{staticClass:"list_bottom_btn",attrs:{type:"primary"},on:{click:function(e){return t.pay(i.trade_id)}}},[t._v("立即付款")]):t._e(),"已發貨"==i.status?e("el-button",{staticClass:"list_bottom_btn",attrs:{type:"primary"},on:{click:function(e){return t.finishOrder(i.trade_id)}}},[t._v("完成訂單")]):t._e()]:t._e(),2==t.userInfo.level?["未付款"==i.status&&t.userInfo.token==i.token?e("el-button",{staticClass:"list_bottom_btn",attrs:{type:"primary",disabled:t.userInfo.token!=i.token},on:{click:function(e){return t.pay(i.trade_id)}}},[t._v("立即付款")]):t._e(),"確認中"==i.status?e("el-button",{staticClass:"list_bottom_btn",attrs:{type:"primary"},on:{click:function(e){return t.checkPay(i.trade_id)}}},[t._v("確認已付款")]):t._e(),"已付款"==i.status?e("el-button",{staticClass:"list_bottom_btn",attrs:{type:"primary"},on:{click:function(e){return t.shipping(i.trade_id)}}},[t._v("進行發貨")]):t._e(),"已發貨"==i.status&&t.userInfo.token==i.token?e("el-button",{staticClass:"list_bottom_btn",attrs:{type:"primary",disabled:t.userInfo.token!=i.token},on:{click:function(e){return t.finishOrder(i.trade_id)}}},[t._v("完成訂單")]):t._e()]:t._e()],2)])])])})):e("el-empty",{staticClass:"empty",attrs:{description:"暫無交易明細"}})],2)},ct=[],dt={name:"Transaction",data(){return{list:[],userInfo:{},timer:-1}},mounted(){const t=r.A.get("x-user-info"),e=r.A.get("x-user-token");if(t&&e){const i=t.slice(t.indexOf("{")),a=JSON.parse(i);this.userInfo=a,this.userInfo.token=e}else this.$router.push("/verify").catch((t=>{})),this.$bus.$emit("handleAlert","購物車資訊通知","請先登入再查看購物車","error");this.getData(),this.timer=setInterval((()=>{this.getData()}),3e3)},methods:{async getData(){try{let t=1==this.userInfo.level?"/api/transaction/info":2==this.userInfo.level?"/api/transaction/infoByManager":"";const e=await T.A.get(t,{headers:{"x-user-token":r.A.get("x-user-token")}});"success"==e.data.type?this.list=e.data.data:this.$bus.$emit("handleAlert","購物車資訊通知",e.data.msg,e.data.type)}catch(t){this.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員。","error")}},async pay(t){try{const e=await T.A.put("/api/transaction/pay",{trade_id:t},{headers:{"x-user-token":r.A.get("x-user-token")}});this.$bus.$emit("handleAlert","訂單交易通知",e.data.msg,e.data.type),this.getData()}catch(e){this.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員。","error")}},async checkPay(t){try{const e=await T.A.put("/api/transaction/check",{trade_id:t},{headers:{"x-user-token":r.A.get("x-user-token")}});this.$bus.$emit("handleAlert","訂單交易通知",e.data.msg,e.data.type),this.getData()}catch(e){this.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員。","error")}},async shipping(t){try{const e=await T.A.put("/api/transaction/shipping",{trade_id:t},{headers:{"x-user-token":r.A.get("x-user-token")}});this.$bus.$emit("handleAlert","訂單交易通知",e.data.msg,e.data.type),this.getData()}catch(e){this.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員。","error")}},async removeItem(t){try{const e=await T.A.delete(`/api/transaction/delete/${t}`,{headers:{"x-user-token":r.A.get("x-user-token")}});this.$bus.$emit("handleAlert","訂單交易通知",e.data.msg,e.data.type),"success"==e.data.type&&(this.getData(),this.$router.push("/trade/finish").catch((t=>{})))}catch(e){this.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員。","error")}},async finishOrder(t){try{const e=await T.A.put("/api/transaction/finish",{trade_id:t},{headers:{"x-user-token":r.A.get("x-user-token")}});this.$bus.$emit("handleAlert","訂單交易通知",e.data.msg,e.data.type),this.getData(),"success"==e.data.type&&this.$router.push("/trade/finish").catch((t=>{}))}catch(e){this.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員。","error")}}},beforeDestroy(){clearInterval(this.timer)}},ut=dt,pt=(0,u.A)(ut,rt,ct,!1,null,"009899f6",null),ht=pt.exports,mt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[t.list.length?t._l(t.list,(function(i,a){return e("div",{key:a,staticClass:"list"},[e("div",{staticClass:"label"},[t._v(t._s(i.status))]),e("div",{staticClass:"list_img"},[e("el-carousel",{attrs:{height:"120px",autoplay:!1,trigger:"click",loop:!1}},t._l(i.product_image,(function(t){return e("el-carousel-item",{key:t},[e("div",{staticClass:"img_box"},[e("img",{attrs:{src:`/api/img/download/${t}`,alt:""}})])])})),1)],1),e("div",{staticClass:"list_content"},[e("div",{staticClass:"list_title"},[t._v(t._s(i.product_name))]),e("div",{staticClass:"list_detail"},[t._v(t._s(i.product_detail))]),e("div",{staticClass:"list_bottom"},[e("div",{staticClass:"list_price"},[t._v(" $"+t._s(i.total_amount)+" ")]),e("div",{staticClass:"list_bottom_right"},[t.userInfo.token==i.token?e("el-button",{staticClass:"list_bottom_btn",attrs:{type:"primary"},on:{click:function(e){return t.addToCart(i.product_uuid)}}},[t._v("再次購買")]):t._e()],1)])])])})):e("el-empty",{staticClass:"empty",attrs:{description:"暫無交易明細"}})],2)},_t=[],ft={name:"Finish",data(){return{list:[],userInfo:{},timer:-1}},mounted(){const t=r.A.get("x-user-info"),e=r.A.get("x-user-token");if(t&&e){const i=t.slice(t.indexOf("{")),a=JSON.parse(i);this.userInfo=a,this.userInfo.token=e}else this.$router.push("/verify").catch((t=>{})),this.$bus.$emit("handleAlert","購物車資訊通知","請先登入再查看購物車","error");this.getData(),this.timer=setInterval((()=>{this.getData()}),3e3)},methods:{async getData(){try{let t=1==this.userInfo.level?"/api/finish/info":2==this.userInfo.level?"/api/finish/infoByManager":"";const e=await T.A.get(t,{headers:{"x-user-token":r.A.get("x-user-token")}});"success"==e.data.type?this.list=e.data.data:this.$bus.$emit("handleAlert","購物車資訊通知",e.data.msg,e.data.type)}catch(t){this.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員。","error")}},async addToCart(t){try{const e=await T.A.post("/api/cart/add",{product_uuid:t,quantity:1},{headers:{"x-user-token":r.A.get("x-user-token")}});this.$bus.$emit("handleAlert","重新下單通知",e.data.msg,e.data.type),"success"==e.data.type&&this.$router.push("/trade/cart").catch((t=>{}))}catch(e){this.$bus.$emit("handleAlert","系統異常通知","系統異常錯誤，請洽客服人員。","error")}}},beforeDestroy(){clearInterval(this.timer)}},vt=ft,gt=(0,u.A)(vt,mt,_t,!1,null,"88fa298c",null),bt=gt.exports;a["default"].use(x.Ay);const yt=new x.Ay({routes:[{path:"/index",component:U},{path:"/verify",component:K},{path:"/trade",component:et,children:[{path:"cart",component:lt},{path:"transaction",component:ht},{path:"finish",component:bt},{path:"",redirect:"cart"}]},{path:"/",redirect:"/index"}]});yt.beforeEach((async(t,e,i)=>{if(t.path.includes("/index")||t.path.includes("/verify"))i();else{const t=r.A.get("x-user-token");try{const e=await T.A.get("/api/verify/check",{headers:{"x-user-token":t}});"success"==e.data.type?i():(i("/verify"),location.reload())}catch(a){console.log(a),alert("系統異常錯誤，請洽客服人員。")}}}));var Ct=yt,$t=i(4927),kt=i.n($t);a["default"].config.productionTip=!1,a["default"].use(kt()),new a["default"]({render:t=>t(k),router:Ct,beforeCreate(){a["default"].prototype.$bus=this}}).$mount("#app")}},e={};function i(a){var s=e[a];if(void 0!==s)return s.exports;var n=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}i.m=t,function(){i.amdO={}}(),function(){var t=[];i.O=function(e,a,s,n){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],s=t[d][1],n=t[d][2];for(var l=!0,r=0;r<a.length;r++)(!1&n||o>=n)&&Object.keys(i.O).every((function(t){return i.O[t](a[r])}))?a.splice(r--,1):(l=!1,n<o&&(o=n));if(l){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[a,s,n]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,n,o=a[0],l=a[1],r=a[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(s in l)i.o(l,s)&&(i.m[s]=l[s]);if(r)var d=r(i)}for(e&&e(a);c<o.length;c++)n=o[c],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(d)},a=self["webpackChunkshop"]=self["webpackChunkshop"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=i.O(void 0,[504],(function(){return i(1034)}));a=i.O(a)})();
//# sourceMappingURL=app.0cb479d9.js.map